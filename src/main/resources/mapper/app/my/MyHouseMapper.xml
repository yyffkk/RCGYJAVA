<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.api.app.dao.my.MyHouseDao">
    <select id="list" parameterType="java.lang.Integer" resultType="com.api.vo.my.MyHouseVo">
        select cree.id,concat(cb.no,'-',cbu.no,'-',cbue.room_number) as room_name,cree.status,cree.effective_time_start,cree.effective_time_end
        from cpm_resident_estate_examine as cree,cpm_building_unit_estate as cbue,cpm_building_unit as cbu,cpm_building as cb
        where cree.building_unit_estate_id = cbue.id and cbue.building_unit_id = cbu.id and cbu.building_id = cb.id and cree.resident_id = #{id} and cree.is_delete = 1
        order by cree.create_date DESC
    </select>

    <update id="updateBaseInfoById" parameterType="com.api.model.basicArchives.UserResident">
        update user_resident
        set name = #{name},
        type = #{type},
        id_type = #{idType},
        id_number = #{idNumber}
        where id = #{id}
    </update>

    <select id="countNotReviewed" parameterType="java.lang.Integer" resultType="java.lang.Integer">
        select count(*) from cpm_resident_estate_examine where resident_id = #{residentId} and status = 1
    </select>
</mapper>